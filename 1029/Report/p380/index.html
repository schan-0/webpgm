<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>갬블링 게임</title>
    <style>
        table {
            border: 1px solid violet;
            border-collapse: collapse;
        }

        td {
            width: 50px;
            height: 50px;
            padding: 0px;
            font: italic 50px consolas, sans-serif;
            color: blue;
            text-align: center;
            background: rgb(246, 209, 180);
        }

        div#msg {
            font: italic 18px consolas, sans-serif;
            color: magenta;
            margin-top: 10px;
        }
    </style>
    
    <script>
        let cell_num = [0, 0, 0];
        let cell_clicked = [false, false, false];
        let cnt = 0;

        function roll(e) {
            let n = Math.floor(Math.random() * 3);
            let t = e.target;

            if(t.id == "cell_1" && !cell_clicked[0]) {
                t.innerHTML = n;
                cell_num[0] = n;
                cell_clicked[0] = true;
                cnt++;
            } else if(t.id == "cell_2" && !cell_clicked[1]) {
                t.innerHTML = n;
                cell_num[1] = n;
                cell_clicked[1] = true;
                cnt++;
            } else if(t.id == "cell_3" && !cell_clicked[2]) {
                t.innerHTML = n;
                cell_num[2] = n;
                cell_clicked[2] = true;
                cnt++;
            }
            let msg = document.querySelector("#msg");
            if(cnt == 3) {
                if (cell_num[0] == cell_num[1] && cell_num[1] == cell_num[2]) {
                    msg.innerHTML = "Success(click here to do again)";
                } else {
                    msg.innerHTML = "fail(click here to do again)";
                }
            }
        }

        function reset() {
            cell_num = [0, 0, 0];
            cell_clicked = [false, false, false];
            cnt = 0;
            document.querySelector("#cell_1").innerHTML = 0;
            document.querySelector("#cell_2").innerHTML = 0;
            document.querySelector("#cell_3").innerHTML = 0;
            document.querySelector("#msg").innerHTML = "";
        }
    </script>
</head>

<body>
    <h3>갬블링 게임</h3>
    <p>각 숫자를 클릭하면 0에서 2사이의 난수로 바뀝니다.
        모두 같은 수가 나오면 승리합니다.</p>
    <hr>
    <table>
        <tr>
            <td id="cell_1" onclick="roll(event)">0</td>
            <td id="cell_2" onclick="roll(event)">0</td>
            <td id="cell_3" onclick="roll(event)">0</td>
        </tr>
    </table>
    <div id="msg" onclick="reset()"></div>
</body>

</html>